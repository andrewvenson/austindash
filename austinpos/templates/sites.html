{% extends 'base.html' %}
{% block title %} Sites {% endblock title %}
{% block sitestab%}
style="font-family: 'Ubuntu', sans-serif;
color: #44659b !important;
background-color:white !important;
border-top-left-radius:3px;
border-bottom-left-radius: 3px;"
{%endblock%}
{% block border %}style="padding-bottom:50px"{% endblock border%}
{% block content %}
    <h1 id="blurblur2" style="color:gray;">Sites</h1>
    <div id="blurblur5" class='row' style=" border-radius:10px; box-shadow: 5px 10px 18px #888888; padding-bottom:50px;">
        <div class='col-sm-6 container'>
            <div class="row" id="blurblur" style="margin-top:10px;">
                <div class="col-lg-6">
                <!-- ADD SITE BUTTON -->
                    <form action="{{url_for('addsites')}}">
                        <button type='submit' class='btn btn-info' style="width:200px;">Add Site</button>
                    </form>
                    <br>
                <!-- NEW MESSAGE BUTTON -->
                     <div class="btn-group" style="margin-bottom:20px;">
                        <button type="button" style="width:200px;" class="btn btn-info dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        New Message
                        </button>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" id="massmessage" style="width:200px;" data-toggle="modal" data-target="#exampleModalCenter2">Mass Message</a>
                            <a class="dropdown-item"style="width:200px;" data-toggle="modal" data-target="#exampleModalCenter2">Multiple Sites</a>
                            <a class="dropdown-item" id="sitemessage" style="width:200px;" data-toggle="modal" data-target="#exampleModalCenter2">Selected Site</a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="float-left" style="padding-bottom:25px; font-family: 'ZCOOL QingKe HuangYou', cursive;">
                        {% if x %}
                            <h1 class="border" style="text-align:center; padding:25px 10px 25px 10px; border-radius: 5px; color:gray;"><strong>{{x}}</strong></h1>
                        {% endif %}
                        <h1></h1>
                    </div>
                </div>
            </div>
<!-- VIEW SITE SELECT FIELD -->
            <div style='padding-bottom: 10px; padding-top:10px; border-radius:5px;'>
                <form action="/siteinfo" method="POST">
                    <select name='sitesss' style='width:200px; border-radius:5px;'>
                        {% for site in sites %}
                        <option >{{site.sitename}}</option>
                        {% endfor %}
                    </select>
                    <button type="submit" style="padding:2px 5px 2px 5px" id="viewsite" class='btn btn-dark'>View Site</button>
                </form>
            </div>
            <br>
            <div class="row">
                <div id="blurblur3" class="col-xl-12">
                    {% if x %}
                        <div id="notifications" style="width:100%; box-shadow: 5px 10px 18px #888888; margin-bottom:20px; margin-top:10px; display:'none'; border-radius:5px;">
                            <ul class="list-group">
                                <li class="list-group-item list-group-item-danger" style="color:red !important; border:.5px solid red; margin-left:0px;"><strong>Loaners</strong><span class="float-right badge badge-light">5</span></li>
                                <li class="list-group-item list-group-item-danger" style="color:red !important; border:.5px solid red; margin-left:0px;"><strong>Balance</strong> <span class="float-right badge badge-light">5</span></li>
                                <li class="list-group-item list-group-item-danger" style="color:red !important; border:.5px solid red; margin-left:0px;"><strong>Messages</strong> <span class="float-right badge badge-light">5</span></li>
                            </ul>
                        </div>
                    {% endif %}
                </div>
            </div>
         </div>

         <!-- Split Rowwww -->
        <div id="blurblur4" class='col-sm-6'>
            <div class='row'>
                <div id="sitedata" style="margin-left:10px; margin-right:10px; margin-top:10px; box-shadow: 5px 10px 18px #888888; border-radius:5px;">
                    <table style="width:100%">
                        {%for site in sites%}
                            {%if x == site.sitename%}
                                <tr>
                                    <th style="width:500px; padding-left:10px; border:1px solid #6cd8d6; color: gray;">Site</th>
                                    <td class="sitedata" style="text-align:right; width:500px; padding-right:10px;"><h3>{{site.sitename}}</h3></td>    
                                </tr>
                                <tr>
                                    <th style=" border:1px solid #6cd8d6; color:gray;padding-left:10px;">Contract Start</th>
                                    <td class="sitedata" style="text-align:right; border-top:1px solid #6cd8d6; padding-right:10px"><h3>{{site.contractstart}}</h3></td>
                                </tr>
                                <tr>
                                    <th style="border:1px solid #6cd8d6; color:gray; padding-left:10px;">Contract End</th>
                                    <td class="sitedata" style="text-align:right; border-top:1px solid #6cd8d6; padding-right:10px"><h3>{{site.contractend}}</h3></td>
                                </tr>
                                <tr>
                                    <th style="border:1px solid #6cd8d6; color:gray; padding-left:10px;">HW Key</th>
                                    <td class="sitedata" style="text-align:right; border-top:1px solid #6cd8d6; padding-right:10px"><h3>{{site.hwkey}}</h3></td>
                                </tr>
                                <tr>
                                    <th style="border:1px solid #6cd8d6; color:gray; padding-left:10px;">Stations</th>
                                    <td class="sitedata" style="text-align:right; border-top:1px solid #6cd8d6; padding-right:10px"><h3>{{site.stations}}</h3></td>
                                </tr>
                                <tr>
                                    <th style="border:1px solid #6cd8d6; color:gray; padding-left:10px;">Printers</th>
                                    <td class="sitedata" style="text-align:right; border-top:1px solid #6cd8d6; padding-right:10px"><h3>{{site.printers}}</h3></td>
                                </tr>
                                <tr>
                                    <th style="border:1px solid #6cd8d6; color:gray; padding-left:10px;">Remote Printers</th>
                                    <td class="sitedata" style="text-align:right; border-top:1px solid #6cd8d6; padding-right:10px"><h3>{{site.remprinters}}</h3></td>
                                </tr>
                                <tr>
                                    <th style="border:1px solid #6cd8d6; color:gray; padding-left:10px;">BOF</th>
                                    <td class="sitedata" style="text-align:right; border-top:1px solid #6cd8d6; padding-right:10px"><h3>{{site.bof}}</h3></td>
                                </tr>
                                <tr>
                                    <th style="border:1px solid #6cd8d6; color:gray; padding-left:10px;">Processor</th>
                                    <td class="sitedata" style="text-align:right; border-top:1px solid #6cd8d6; padding-right:10px"><h3>{{site.processor}}</h3></td>
                                </tr>
                                <tr>
                                    <th style="border:1px solid #6cd8d6; color:gray; padding-left:10px;">Gift Cards</th>
                                    <td class="sitedata" style="text-align:right; border-top:1px solid #6cd8d6; padding-right:10px"><h3>{{site.giftopt}}</h3></td>
                                </tr>
                            {% endif %}
                        {%endfor%}
                    </table>
                </div>
                <div id="userdata" style="margin-left:10px; margin-right:10px; margin-top:10px; box-shadow: 5px 10px 18px #888888; border-radius:5px; display:none;">
                    <table style="width:100%">
                        <thead class="border">
                            <th>Username</th>
                            <th>Email</th>
                            <th>Admin Status</th>
                        </thead>
                        {% for user in userinfo %}
                            <tr>
                                <td style="padding-left:5px;" class="border">{{user.username}}</td>
                                <td style="padding-left:5px;" class="border">{{user.email}}</td>
                                <td style="padding-left:5px;" class="border">{{user.adminstatus}}</td>
                            </tr>
                        {% endfor %}
                    </table>
                </div>
            </div>  
            <!-- TOGGLE BETWEEN VIEWING SITE AND VIEWING USERS -->
            {% if x %}
                <button class="btn btn-dark" id="usertogg" style="margin-top:10px; float:right;">View Users</button>
            {% endif %}
            <button class="btn btn-dark" id="sitetogg" style="margin-top:10px; float:right; display:none;">View Site</button>
            <a href="{{url_for('register')}}"><button class="btn btn-warning" id="sitetogg2" style="margin-top:10px; float:right; display:none; margin-right:10px;">Register User</button></a>
        </div>
    </div>

    <div class="modal fade" id="exampleModalCenter2" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
               <div class="modal-content">
                   <div class="modal-header">
                        {% if x %}
                            <p id="sitename" style="display:none;">{{x}}</p>
                            <h5 class="modal-title" id="exampleModalLongTitle">Message to {{x}}</h5>
                        {% else %}
                            <h5 class="modal-title" id="exampleModalLongTitle">Message to ALL SITES</h5>
                        {% endif %}
                       <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                       <span aria-hidden="true">&times;</span>
                       </button>
                   </div>
                   <div class="modal-body">
                       <form method="POST">
                            {{form.csrf_token()}}
                            {{form.message( style="width:100%; border-radius:5px;", rows=5)}}
                            {{form.emailtype(style="display:none;", id="gonademail")}}
                            {{form.sitename(style="display:none;", id="gonadsite")}}
                            <div>
                                <button type="submit" class="btn btn-success" style="width:100%;">Send</button>
                            </div>
                       </form>
                   </div>
               </div>
           </div>
       </div>
    
{% endblock content %}

{% block scripts %}

{% endblock %}